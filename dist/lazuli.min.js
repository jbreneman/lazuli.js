!function(){"use strict";function t(t,e){if(void 0===t||null===t)throw new TypeError("Cannot convert first argument to object");for(var n=Object(t),i=1;i<arguments.length;i++){var s=arguments[i];if(void 0!==s&&null!==s)for(var a=Object.keys(Object(s)),o=0,r=a.length;o<r;o++){var c=a[o],l=Object.getOwnPropertyDescriptor(s,c);void 0!==l&&l.enumerable&&(n[c]=s[c])}}return n}function e(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:t})}function n(){var t={className:"lazuli",background:!0,img:!0};[].slice.call(arguments).forEach(function(e){"string"==typeof e&&(t.className=e),isobject(e)&&(t=Object.assign({},t,e))}),this.options=t,this.init(t)}({assign:t,polyfill:e}).polyfill(),n.prototype={_load:function(t,e){var n=document.createElement("img");n.addEventListener("load",function(){"function"==typeof e&&e(this,t),this.removeEventListener("load",this)}),void 0!==t.dataset.srcset&&n.setAttribute("srcset",t.dataset.srcset),void 0!==t.dataset.sizes&&n.setAttribute("sizes",t.dataset.sizes),n.setAttribute("src",t.dataset.src)},_createInside:function(t){var e="\n\t\t\tbackground-image: url("+t+");\n\t\t\tbackground-position: inherit;\n\t\t\tbackground-size: inherit;\n\t\t\tbackground-repeat: inherit;\n\t\t\tposition: absolute;\n\t\t\twidth: 100%;\n\t\t\theight: 100%;\n\t\t\tleft: 0;\n\t\t\ttop: 0;\n\t\t\topacity: 0;\n\t\t\ttransition:\n\t\t\topacity .24s ease;\n\t\t\tz-index: -1;\n\t\t",n=document.createElement("div");return n.classList.add("lazuli-inner"),n.setAttribute("style",e),n},_background:function(t,e){var n=window.getComputedStyle(e,null);"static"===n.position&&(e.style.position="relative"),"auto"===n.zIndex&&(e.style.zIndex="0");var i=this._createInside(t.currentSrc||t.src);e.appendChild(i),e.firstElementChild.offsetHeight,e.querySelector(".lazuli-inner").style.opacity="1",window.setTimeout(function(){e.style.backgroundImage="none"},240),e.classList.add("loaded")},_img:function(t,e){e.src=t.currentSrc||t.src,e.classList.add("loaded")},init:function(t){var e=this,n=document.querySelectorAll("."+t.className);[].slice.call(n).forEach(function(t){"IMG"===t.tagName?e._load(t,e._img):e._load(t,e._background.bind(e))})}},window.Lazuli=n}();
