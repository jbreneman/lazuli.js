!function(){"use strict";function t(t,e){if(void 0===t||null===t)throw new TypeError("Cannot convert first argument to object");for(var n=Object(t),i=1;i<arguments.length;i++){var r=arguments[i];if(void 0!==r&&null!==r)for(var a=Object.keys(Object(r)),o=0,s=a.length;o<s;o++){var c=a[o],l=Object.getOwnPropertyDescriptor(r,c);void 0!==l&&l.enumerable&&(n[c]=r[c])}}return n}function e(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:t})}function n(){var t={className:"lazuli",background:!0,img:!0,fancy:!0};[].slice.call(arguments).forEach(function(e){"string"==typeof e&&(t.className=e),i(e)&&(t=Object.assign({},t,e))}),this.options=t,this.init(t)}var i=function(t){return null!=t&&"object"==typeof t&&!1===Array.isArray(t)};({assign:t,polyfill:e}).polyfill(),n.prototype={_load:function(t,e){var n=document.createElement("img");n.addEventListener("load",function(){"function"==typeof e&&e(this,t),this.removeEventListener("load",this);for(var n in Object.assign({},t.dataset))delete t.dataset[n]});for(var i in Object.assign({},t.dataset))"src"!==i&&n.setAttribute(i,t.dataset[i]);n.setAttribute("src",t.dataset.src)},_createInside:function(t){var e="\n\t\t\tbackground-image: url("+t+");\n\t\t\tbackground-position: inherit;\n\t\t\tbackground-size: inherit;\n\t\t\tbackground-repeat: inherit;\n\t\t\tposition: absolute;\n\t\t\twidth: 100%;\n\t\t\theight: 100%;\n\t\t\tleft: 0;\n\t\t\ttop: 0;\n\t\t\topacity: 0;\n\t\t\ttransition:\n\t\t\topacity .24s ease;\n\t\t\tz-index: -1;\n\t\t",n=document.createElement("div");return n.classList.add("lazuli-inner"),n.setAttribute("style",e),n},_background:function(t,e){if(this.options.fancy){var n=window.getComputedStyle(e,null);"static"===n.position&&(e.style.position="relative"),"auto"===n.zIndex&&(e.style.zIndex="0");var i=this._createInside(t.currentSrc||t.src);e.appendChild(i),e.firstElementChild.offsetHeight,e.querySelector(".lazuli-inner").style.opacity="1",window.setTimeout(function(){e.style.backgroundImage="none"},240)}else e.style.backgroundImage="url("+(t.currentSrc||t.src)+")";e.classList.add("loaded")},_img:function(t,e){e.src=t.currentSrc||t.src,e.classList.add("loaded")},init:function(t){var e=this,n=document.querySelectorAll("."+t.className);[].slice.call(n).forEach(function(t){"IMG"===t.tagName?e._load(t,e._img):e._load(t,e._background.bind(e))})}},window.Lazuli=n}();
